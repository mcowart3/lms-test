{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\micai\\\\Documents\\\\GitHub\\\\jif0359\\\\frontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Jumbotron from\"react-bootstrap/Jumbotron\";import Container from\"react-bootstrap/Container\";import styles from\"./DocumentPage.module.scss\";import Form from\"react-bootstrap/Form\";import FormControl from\"react-bootstrap/FormControl\";import Button from\"react-bootstrap/Button\";import CommentSidebar from\"../comments/CommentSidebar\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import TestCommentService from\"../../services/commentService/TestCommentService\";import LocalTagService from\"../../services/tagService/LocalTagService\";var DocumentPage=/*#__PURE__*/function(_Component){_inherits(DocumentPage,_Component);var _super=_createSuper(DocumentPage);function DocumentPage(props){var _this;_classCallCheck(this,DocumentPage);_this=_super.call(this,props);_this.commentService=void 0;_this.tagService=void 0;_this.state={comments:undefined,tag:\"\",currentTags:_this.props.document.tags||[],commentsVisible:false};_this.commentService=new TestCommentService();_this.tagService=new LocalTagService();_this.getComments(_this.props.document);return _this;}_createClass(DocumentPage,[{key:\"getComments\",value:function(){var _getComments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(document){var docComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.commentService.getComments(document);case 2:docComments=_context.sent;this.setState({comments:docComments});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function getComments(_x){return _getComments.apply(this,arguments);}return getComments;}()},{key:\"addTag\",value:function(){var _addTag=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(document,tag){var updatedTags,taggedDoc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updatedTags=this.state.currentTags.concat(tag);this.setState({currentTags:updatedTags});_context2.next=4;return this.tagService.tagDocument(document,tag);case 4:taggedDoc=_context2.sent;this.forceUpdate();// hacky for now, but updates currentTags dynamically\nreturn _context2.abrupt(\"return\",taggedDoc);case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function addTag(_x2,_x3){return _addTag.apply(this,arguments);}return addTag;}()},{key:\"formatTags\",value:function formatTags(tags){var formattedTags=\"\";if(tags!==undefined){for(var i=0;i<tags.length-1;i++){formattedTags=formattedTags.concat(tags[i]);formattedTags=formattedTags.concat(', ');}formattedTags=formattedTags.concat(tags[tags.length-1]);}return formattedTags;}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Jumbotron,{fluid:true,className:styles.Body},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:8,className:styles.textbckd},/*#__PURE__*/React.createElement(\"div\",{className:styles.titleContainer},/*#__PURE__*/React.createElement(\"h1\",{className:styles.Title},this.props.document.title||\"Unknown\",\" \"),/*#__PURE__*/React.createElement(Button,{variant:\"outline-info\",onClick:function onClick(){_this2.setState({commentsVisible:!_this2.state.commentsVisible});},className:styles.commentButton},this.state.commentsVisible?\"Hide Comments\":\"Show Comments\")),/*#__PURE__*/React.createElement(\"h1\",{className:styles.Author},this.props.document.author||\"Unknown\",\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{className:styles.Text},\" \",this.props.document.text||\"Unknown\",\" \"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Row,{className:styles.padding},/*#__PURE__*/React.createElement(Col,{sm:4},/*#__PURE__*/React.createElement(\"p\",{className:styles.tags},\" Current tags: \",this.formatTags(this.state.currentTags))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form,{className:styles.left},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FormControl,{type:\"tag\",className:styles.tagForm,placeholder:\"Tag this document!\",onChange:function onChange(event){return _this2.setState({tag:event.target.value});}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"outline-info\",onClick:function onClick(){_this2.addTag(_this2.props.document,_this2.state.tag);},href:'#tag/'+this.state.tag,className:styles.tagButton},\"Add Tag\"))))))),/*#__PURE__*/React.createElement(Col,{sm:4},this.state.commentsVisible?/*#__PURE__*/React.createElement(CommentSidebar,{comments:this.state.comments}):/*#__PURE__*/React.createElement(React.Fragment,null)))));}}]);return DocumentPage;}(Component);export{DocumentPage as default};","map":{"version":3,"sources":["C:/Users/micai/Documents/GitHub/jif0359/frontEnd/src/components/documents/DocumentPage.tsx"],"names":["React","Component","Jumbotron","Container","styles","Form","FormControl","Button","CommentSidebar","Row","Col","TestCommentService","LocalTagService","DocumentPage","props","commentService","tagService","state","comments","undefined","tag","currentTags","document","tags","commentsVisible","getComments","docComments","setState","updatedTags","concat","tagDocument","taggedDoc","forceUpdate","formattedTags","i","length","Body","textbckd","titleContainer","Title","title","commentButton","Author","author","Text","text","padding","formatTags","left","tagForm","event","target","value","addTag","tagButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Jumbotron from \"react-bootstrap/Jumbotron\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport styles from \"./DocumentPage.module.scss\";\r\nimport LitDocument from \"../../model/LitDocument\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport DocComment from \"../../model/DocComment\";\r\nimport CommentSidebar from \"../comments/CommentSidebar\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport ICommentService from \"../../services/commentService/ICommentService\";\r\nimport TestCommentService from \"../../services/commentService/TestCommentService\";\r\nimport ITagService from \"../../services/tagService/ITagService\";\r\nimport LocalTagService from \"../../services/tagService/LocalTagService\";\r\n\r\ninterface IDocumentPageProps {\r\n\tdocument: LitDocument;\r\n}\r\n\r\ninterface IDocumentPageState {\r\n\tcomments?: DocComment[];\r\n\ttag: string;\r\n\tcurrentTags: string[];\r\n\tcommentsVisible: boolean;\r\n}\r\n\r\nexport default class DocumentPage extends Component<IDocumentPageProps, IDocumentPageState> {\r\n\r\n\tprivate commentService: ICommentService;\r\n\tprivate tagService: ITagService;\r\n\r\n\tconstructor(props: IDocumentPageProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcomments: undefined,\r\n\t\t\ttag: \"\",\r\n\t\t\tcurrentTags: this.props.document.tags || [],\r\n\t\t\tcommentsVisible: false\r\n\t\t};\r\n\t\tthis.commentService = new TestCommentService();\r\n\t\tthis.tagService = new LocalTagService();\r\n\t\tthis.getComments(this.props.document);\r\n\t}\r\n\r\n\tprivate async getComments(document: LitDocument) {\r\n\t\tlet docComments: DocComment[] = await this.commentService.getComments(document);\r\n\t\tthis.setState({ comments: docComments });\r\n\t}\r\n\r\n\tprivate async addTag(document: LitDocument, tag: string) {\r\n\t\tvar updatedTags = this.state.currentTags.concat(tag);\r\n\t\tthis.setState({ currentTags: updatedTags });\r\n\t\tlet taggedDoc = await this.tagService.tagDocument(document, tag);\r\n\t\tthis.forceUpdate(); // hacky for now, but updates currentTags dynamically\r\n\t\treturn taggedDoc;\r\n\t}\r\n\r\n\tprivate formatTags(tags: string[]) {\r\n\t\tvar formattedTags = \"\";\r\n\t\tif (tags !== undefined) {\r\n\t\t\tfor (var i = 0; i < tags.length - 1; i++) {\r\n\t\t\t\tformattedTags = formattedTags.concat(tags[i]);\r\n\t\t\t\tformattedTags = formattedTags.concat(', ');\r\n\t\t\t}\r\n\t\t\tformattedTags = formattedTags.concat(tags[tags.length - 1]);\r\n\t\t}\r\n\t\treturn formattedTags;\r\n\t}\r\n\r\n\trender(): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<Jumbotron fluid className={styles.Body}>\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col sm={8} className={styles.textbckd}>\r\n\t\t\t\t\t\t\t<div className = {styles.titleContainer}>\r\n\t\t\t\t\t\t\t<h1 className={styles.Title}>{this.props.document.title || \"Unknown\"} </h1>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"outline-info\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => { this.setState({ commentsVisible: !this.state.commentsVisible }) }}\r\n\t\t\t\t\t\t\t\t\tclassName={styles.commentButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.commentsVisible ? \"Hide Comments\" : \"Show Comments\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h1 className={styles.Author}>{this.props.document.author || \"Unknown\"} </h1>\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<p className={styles.Text}> {this.props.document.text || \"Unknown\"} </p>\r\n\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t\t\t<Row className={styles.padding}>\r\n\t\t\t\t\t\t\t\t<Col sm={4}>\r\n\t\t\t\t\t\t\t\t\t{/* need to update this dynamically */}\r\n\t\t\t\t\t\t\t\t\t<p className={styles.tags}> Current tags: {this.formatTags(this.state.currentTags)}</p>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form className={styles.left}>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"tag\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.tagForm}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Tag this document!\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => this.setState({ tag: (event.target.value) })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline-info\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { this.addTag(this.props.document, this.state.tag) }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={'#tag/' + this.state.tag}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.tagButton}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tAdd Tag\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t<Col sm={4}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.commentsVisible ?\r\n\t\t\t\t\t\t\t\t\t<CommentSidebar\r\n\t\t\t\t\t\t\t\t\t\tcomments={this.state.comments}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t</Jumbotron >\r\n\t\t);\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}